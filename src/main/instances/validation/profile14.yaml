#%Validation Profile 1.0

profile: profile

violation:
  - not-anonymous-types

validations:

  not-anonymous-types:
    message: |
      Instead of inlining definition of schemas in HTTP responses,
      referencing declared types is preferred since it provides descriptive names for the federated types
    targetClass: apiContract.Operation
    propertyConstraints:
      apiContract.method:
        pattern: "get"
      apiContract.returns / apiContract.payload:
        nested:
          if:
            propertyConstraints:
              core.mediaType:
                pattern: "application/json"
              shapes.schema:
                minCount: 1
          then:
            propertyConstraints:
              shapes.schema / doc.link-label:
                minCount: 1
